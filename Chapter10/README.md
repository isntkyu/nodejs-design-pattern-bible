## 범용 자바스크립트

### 브라우저와의 코드 공유

상대 플랫폼이 async/await 등의 기능을 보유하고 있는 버전인지,  
브라우저에서는 require()함수나 파일 시스템이 없다는 점  
ESM 지원하는 최신 브라우저가 아닐 수 있는지,  
서버는 모듈을 파일시스템에서 로드한다는 점.  

모듈 번들러가 필요함.

종속성 해결단계 == DFS 생각하면 됨.  
모듈맵: module, require 를 인자로 받는 팩토리 함수  

---

### 런타임 코드를 분기하는 방법

조건문으로 window 변수의 존재를 확인하는 방법이 있음  
- 사용하지 않는 코드가 많아질 거고, 코드 보안이 취약(브라우저에 중요코드가 노출)
- 로직이 섞이면서 가독성 저해
- 최종 번들에 항상 두 가지 코드가 포함됨
- 모든 import 를 번들에 포함시킴

> 동적으로 import 해야함

### 빌드시 코드 분기

- 웹팩 플러그인 사용
- 모듈 스와핑
- 디자인 패턴
  - 전략및 템플릿
    - 알고리즘의 공통단계를 정의하여 일부 부분만 교체시킴
  - 어댑터
    - 전체 컴포넌트 교체, sqlite 같은 db를 사용하는 경우 대체시키는 경우
  - 프록시
    - 서버코드를 브라우저에서 사용하도록 할 때
  - DI 및 서비스 로케이터