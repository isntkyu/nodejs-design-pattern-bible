## 7-4 싱글톤

싱글톤 패턴의 목적

- 상태 정보의 공유
- 리소스 사용의 최적화
- 리소스에 대한 접근 동기화

Node.js 에서는 인스턴스를 export 함으로써 싱글톤을 사용할 수 있다.

하지만 이는 엄격한 정의의 싱글톤이 될 순 없다.

- db인스턴스를 반환하는 패키지 db
- 1.0 버전의 db에 종속성이 있는 packageA
- 2.0 버전의 db에 종속성이 있는 packageB
- packageA와 packageB에 종속성이 있는 app

이런경우에 app 에서 사용하는 db 인스턴스가 고유한가? 아닐 것이다.
즉, 싱글톤이 될 수 없다.

이 경우 패키지 매니저는 최상위 node_modules 에 db 패키지를 설치하고,(종속성 호이스팅)
동일한 인스턴스를 공유하도록 한다.

명시적으로 글로번 인스턴스를 선언하여 사용하면
엄격한 정의의 싱글톤으로 사용할 수 있다.

최악의 경우를 대비해 패키지를 만들 때는 무상태 객체를 export 하자.