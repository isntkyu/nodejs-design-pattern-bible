# 4-2 콜백 모범 사례와 제어 흐름 패턴

---

## 4-2-1 콜백 규칙

콜백을 정의할 때 in-place 함수의 정의를 남용하지 않기.

중첩수준을 낮게 유지하고 일반적으로도 코드 체계를 개선하는 원칙

- 가능한 빨리 종료 (return, continue, break)
- 콜백을 위해 명명된 함수를 생성하여 클로저 바깥에 배치하며 중간 결과를 인자로 전달.
  함수의 이름을 지정하면 스택 추적에서 더 잘 보이게 됩니다.
- 코드 모듈화. 가능하면 작고 재사용 가능한 함수로 분할.

---

## 4-2-2 콜백 규칙 적용

- 빠른 반환 원칙) else 문 제거하고 return 사용 (에러가 없을 때 진행할 코드 구분)
  오류를 받는 즉시 함수로부터 복귀가 가능합니다.

  - 콜백호출될 때 return (함수 종료) 안하는 거 조심.
  - **콜백이 실행되어도 함수는 실행이 계속된다**.! 종료를 해주어야한다.

- 코드 중첩 줄이기) 재사용성 및 테스트 가능성 높이기.(saveFile, download 함수 export 가능)

- 클로저와 익명함수 남용하지 않기

---

## 4-2-3 순차 실행
